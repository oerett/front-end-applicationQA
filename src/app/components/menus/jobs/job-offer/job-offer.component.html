<div id="job-offer" class="page-layout">
    <div class="table-container">
        <button class="refresh" mat-button matSuffix (click)="refetchJobs()">
            <mat-icon class="pointer">refresh</mat-icon>
        </button>
        <mat-paginator fxFlex="100" [pageSizeOptions]="[25, 50, 75]" class="sticky" [showFirstLastButtons]="true">
        </mat-paginator>
        <div *ngIf="this.dataSource?.filteredData?.length === 0" class="data-not-found">
            <p class="not-found-txt">Data not found!</p>
        </div>
        <table mat-table matSort [dataSource]="dataSource" class="mat-elevation-z8 mat-table no-side-shadow">
            <ng-container matColumnDef="index">
                <th mat-header-cell *matHeaderCellDef>
                </th>
                <td mat-cell *matCellDef="let jobsData;  let i = index">{{i+1}}</td>
            </ng-container>
            <ng-container matColumnDef="jobId">
                <th mat-header-cell *matHeaderCellDef
                    [ngClass]="{'sort-hover': (sortDir==='default' || sortedColumn!=='jobId')}">
                    <mat-form-field>
                        <input autocomplete="off" matInput (keyup)="applyFilter('jobId', $event)" placeholder="Job id"
                            [(ngModel)]="jobId">
                        <button mat-button matSuffix mat-icon-button aria-label="Sort"
                            (click)="sortByColumn($event, 'jobId')">
                            <mat-icon class="pointer big default-icon">arrow_upward</mat-icon>
                            <mat-icon *ngIf="sortDir==='asc' && sortedColumn==='jobId'" class="pointer big">
                                arrow_downward
                            </mat-icon>
                            <mat-icon *ngIf="sortDir==='desc' && sortedColumn==='jobId'" class="pointer big">
                                arrow_upward
                            </mat-icon>
                        </button>
                    </mat-form-field>
                </th>
                <td mat-cell *matCellDef="let jobsData"> {{jobsData.jobId}} </td>
            </ng-container>
            <ng-container matColumnDef="jobDescription">
                <th mat-header-cell *matHeaderCellDef
                    [ngClass]="{'sort-hover': (sortDir==='default' || sortedColumn!=='jobDescription')}">
                    <mat-form-field>
                        <input autocomplete="off" matInput (keyup)="applyFilter('jobDescription', $event)"
                            placeholder="Job description" [(ngModel)]="jobDescription">
                        <button mat-button matSuffix mat-icon-button aria-label="Sort"
                            (click)="sortByColumn($event, 'jobDescription')">
                            <mat-icon class="pointer big default-icon">arrow_upward</mat-icon>
                            <mat-icon *ngIf="sortDir==='asc' && sortedColumn==='jobDescription'" class="pointer big">
                                arrow_downward
                            </mat-icon>
                            <mat-icon *ngIf="sortDir==='desc' && sortedColumn==='jobDescription'" class="pointer big">
                                arrow_upward
                            </mat-icon>
                        </button>
                    </mat-form-field>
                </th>
                <td mat-cell *matCellDef="let jobsData"> {{jobsData.jobDescription}} </td>
            </ng-container>
            <ng-container matColumnDef="jobLongDescription">
                <th mat-header-cell *matHeaderCellDef
                    [ngClass]="{'sort-hover': (sortDir==='default' || sortedColumn!=='jobLongDescription')}">
                    <mat-form-field>
                        <input autocomplete="off" matInput (keyup)="applyFilter('jobLongDescription', $event)"
                            placeholder="Job long description" [(ngModel)]="jobLongDescription">
                        <button mat-button matSuffix mat-icon-button aria-label="Sort"
                            (click)="sortByColumn($event, 'jobLongDescription')">
                            <mat-icon class="pointer big default-icon">arrow_upward</mat-icon>
                            <mat-icon *ngIf="sortDir==='asc' && sortedColumn==='jobLongDescription'"
                                class="pointer big">
                                arrow_downward
                            </mat-icon>
                            <mat-icon *ngIf="sortDir==='desc' && sortedColumn==='jobLongDescription'"
                                class="pointer big">
                                arrow_upward
                            </mat-icon>
                        </button>
                    </mat-form-field>
                </th>
                <td mat-cell *matCellDef="let jobsData"> {{jobsData.jobLongDescription}} </td>
            </ng-container>
            <ng-container matColumnDef="options">
                <th mat-header-cell *matHeaderCellDef>
                </th>
                <td mat-cell *matCellDef="let jobsData">
                    <button class="pointer" mat-icon-button [matMenuTriggerFor]="moreOptions" aria-label="more">
                        <mat-icon>more_vert</mat-icon>
                    </button>
                    <mat-menu #moreOptions="matMenu">
                        <button mat-menu-item [disabled]="email != jobsData.email" (click)="modifyJobs(jobsData)">
                            <mat-icon>edit</mat-icon>
                            <span>Modify</span>
                        </button>
                        <button mat-menu-item [disabled]="email != jobsData.email" (click)="delete(jobsData)">
                            <mat-icon>delete</mat-icon>
                            <span>Delete</span>
                        </button>
                    </mat-menu>
                </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedColumns;sticky: true"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
    </div>
    <div class="footer">
        <button mat-fab (click)="addJobs()" class="add-button pointer">
            <mat-icon matSuffix class="add-icon">add</mat-icon>
        </button>
    </div>
</div>